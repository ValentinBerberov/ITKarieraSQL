DROP SCHEMA IF EXISTS Supermarket;

CREATE SCHEMA IF NOT EXISTS Supermarket;
USE Supermarket;

CREATE TABLE IF NOT EXISTS Stores(
	Store_ID INT AUTO_INCREMENT PRIMARY KEY,
    Location VARCHAR(50) NOT NULL,
    Area DECIMAL(10, 2) NOT NULL, CHECK(Area>0),
    Yearly_Earnings DECIMAL(10, 2) NOT NULL, CHECK(Yearly_Earnings>0),
    Weekly_Visits INT NOT NULL
);

CREATE TABLE IF NOT EXISTS ProductTypes(
	Product_ID INT PRIMARY KEY,
    Product_Name VARCHAR(50) NOT NULL,
    Category_Name VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS Employees(
	Employee_ID INT AUTO_INCREMENT PRIMARY KEY,
    Store_ID INT NOT NULL,
    First_Name VARCHAR(20) NOT NULL,
    Last_Name VARCHAR(20) NOT NULL,
    Position VARCHAR(50) NOT NULL,
    Yearly_Salary DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (Store_ID) REFERENCES Stores(Store_ID)
);

CREATE TABLE IF NOT EXISTS Items(
	Product_ID INT NOT NULL,
    Store_ID INT NOT NULL,
    Price DECIMAL(10, 2) NOT NULL, CHECK(Price>0),
    Discontinued BOOLEAN NOT NULL,
    In_Stock_Quantity INT NOT NULL, CHECK(In_Stock_Quantity>=0),
    Backlog_Quantity INT NOT NULL, CHECK(Backlog_Quantity>=0),
    Weekly_Purchases_Amount INT,
    FOREIGN KEY (Store_ID) REFERENCES Stores(Store_ID),
    FOREIGN KEY (Product_ID) REFERENCES ProductTypes(Product_ID)
);

CREATE TABLE IF NOT EXISTS Customers(
	Customer_ID INT AUTO_INCREMENT PRIMARY KEY,
    First_Name VARCHAR(20) NOT NULL,
    Last_Name VARCHAR(20) NOT NULL,
    Last_Visit DATETIME NULL,
    Last_Item_Purchased_ID INT NULL,
    FOREIGN KEY (Last_Item_Purchased_ID) REFERENCES Items(Product_ID)
);

CREATE TABLE IF NOT EXISTS Inventory(
	Inventory_ID INT AUTO_INCREMENT PRIMARY KEY,
    Location VARCHAR(50) NOT NULL,
    Product_ID INT NOT NULL,
    Total_Quantity INT NOT NULL,
    FOREIGN KEY (Product_ID) REFERENCES ProductTypes(Product_ID)
);

CREATE TABLE IF NOT EXISTS Shipments(
	Shipment_ID INT AUTO_INCREMENT PRIMARY KEY,
    Product_ID INT NOT NULL,
    From_Inventory_ID INT NOT NULL,
    To_Store_ID INT NOT NULL,
    Shipping_Date DATETIME NOT NULL,
    Quantity INT NOT NULL, CHECK(Quantity>0),
    FOREIGN KEY (From_Inventory_ID) REFERENCES Inventory(Inventory_ID),
    FOREIGN KEY (To_Store_ID) REFERENCES Stores(Store_ID),
    FOREIGN KEY (Product_ID) REFERENCES ProductTypes(Product_ID)
);

INSERT INTO Stores (store_id, location, area, yearly_earnings, weekly_visits) VALUES
(1, 'София', 250.5, 1500000.75, 5000),
(2, 'Пловдив', 180.2, 1200000.50, 4000),
(3, 'Варна', 200.0, 1300000.00, 4200),
(4, 'Бургас', 175.3, 1100000.30, 3800),
(5, 'Русе', 160.7, 950000.20, 3000),
(6, 'Стара Загора', 170.4, 1000000.00, 3100),
(7, 'Плевен', 150.9, 850000.00, 2900),
(8, 'Сливен', 140.5, 780000.50, 2700),
(9, 'Добрич', 130.2, 730000.00, 2600),
(10, 'Шумен', 145.8, 820000.25, 2800),
(11, 'Перник', 125.0, 690000.75, 2500),
(12, 'Хасково', 135.6, 750000.60, 2650),
(13, 'Благоевград', 155.3, 880000.40, 2850),
(14, 'Велико Търново', 160.0, 920000.90, 2950),
(15, 'Габрово', 120.7, 670000.30, 2300),
(16, 'Видин', 110.4, 590000.00, 2100),
(17, 'Кърджали', 140.9, 720000.80, 2600),
(18, 'Монтана', 115.5, 610000.50, 2200),
(19, 'Разград', 105.2, 540000.00, 2000),
(20, 'Търговище', 130.8, 770000.90, 2750);

INSERT INTO Employees(Store_ID, First_Name, Last_Name, Position, Yearly_Salary) VALUES
(1, "Теодор", "Първанов", "Мениджър", 2800),
(1, "Стамен", "Кирилов", "Касиер", 2100),
(1, "Васил", "Михайлов", "Касиер", 2000),
(2, "Васил", "Димов", "Мениджър", 2800),
(2, "Петър", "Николов", "Касиер", 2400),
(2, "Иван", "Пенев", "Касиер", 3000),
(3, "Кирил", "Димитров", "Мениджър", 3600),
(3, "Мартин", "Георгиев", "Касиер", 2600),
(3, "Никола", "Петров", "Касиер", 2000),
(4, "Стамен", "Алексиев", "Мениджър", 3900),
(4, "Румен", "Петров", "Касиер", 2600),
(4, "Виктор", "Димитров", "Касиер", 3000),
(5, "Стамен", "Атанасов", "Мениджър", 4000),
(5, "Тодор", "Вълчев", "Касиер", 1900),
(5, "Стефан", "Алексиев", "Касиер", 1800),
(6, "Иван", "Тенев", "Мениджър", 3900),
(6, "Михаил", "Вълчев", "Касиер", 2200),
(6, "Михаил", "Кирилов", "Касиер", 2700),
(7, "Михаил", "Николов", "Мениджър", 2700),
(7, "Андрей", "Дончев", "Касиер", 2400),
(7, "Павел", "Христов", "Касиер", 3000),
(8, "Георги", "Станков", "Мениджър", 4300),
(8, "Кристиан", "Милев", "Касиер", 2200),
(8, "Борис", "Димов", "Касиер", 2600),
(9, "Иван", "Йорданов", "Мениджър", 4500),
(9, "Иван", "Стоянов", "Касиер", 2100),
(9, "Никола", "Георгиев", "Касиер", 1800),
(10, "Тодор", "Григоров", "Мениджър", 2700),
(10, "Мартин", "Григоров", "Касиер", 3000),
(10, "Мартин", "Милев", "Касиер", 2900),
(11, "Павел", "Стоянов", "Мениджър", 4300),
(11, "Михаил", "Кирилов", "Касиер", 2900),
(11, "Емил", "Маринов", "Касиер", 2000),
(12, "Кирил", "Георгиев", "Мениджър", 2700),
(12, "Петър", "Тодоров", "Касиер", 3000),
(12, "Георги", "Георгиев", "Касиер", 1800),
(13, "Калоян", "Йорданов", "Мениджър", 3300),
(13, "Георги", "Василев", "Касиер", 3000),
(13, "Николай", "Атанасов", "Касиер", 2800),
(14, "Виктор", "Тодоров", "Мениджър", 3600),
(14, "Тодор", "Кръстев", "Касиер", 3000),
(14, "Кирил", "Григоров", "Касиер", 2000),
(15, "Боян", "Тенев", "Мениджър", 4500),
(15, "Павел", "Кирилов", "Касиер", 2600),
(15, "Денис", "Павлов", "Касиер", 2000),
(16, "Георги", "Стоянов", "Мениджър", 3700),
(16, "Боян", "Пенев", "Касиер", 2900),
(16, "Андрей", "Димов", "Касиер", 2600),
(17, "Мартин", "Димитров", "Мениджър", 3400),
(17, "Виктор", "Димитров", "Касиер", 2500),
(17, "Михаил", "Димов", "Касиер", 2500),
(18, "Иван", "Василев", "Мениджър", 4000),
(18, "Кирил", "Георгиев", "Касиер", 2900),
(18, "Мартин", "Милев", "Касиер", 1900),
(19, "Стефан", "Тодоров", "Мениджър", 4500),
(19, "Кристиан", "Рашков", "Касиер", 3000),
(19, "Емил", "Николов", "Касиер", 2300),
(20, "Виктор", "Тенев", "Мениджър", 3000),
(20, "Никола", "Тенев", "Касиер", 2200),
(20, "Кирил", "Стоянов", "Касиер", 1900)
;

INSERT INTO ProductTypes (Product_ID, Product_Name, Category_Name) VALUES
(1, "Хляб", "Основни хранителни продукти"),
(2, "Мляко", "Млечни продукти"),
(3, "Захар", "Основни хранителни продукти"),
(4, "Яйца", "Основни хранителни продукти"),
(5, "Краве масло", "Млечни продукти"),
(6, "Олио", "Основни хранителни продукти"),
(7, "Сирене", "Млечни продукти"),
(8, "Кашкавал", "Млечни продукти"),
(9, "Кисело мляко", "Млечни продукти"),
(10, "Салам", "Месни продукти"),
(11, "Сьомга", "Месни продукти"),
(12, "Картофи", "Зеленчуци"),
(13, "Лук", "Зеленчуци"),
(14, "Домати", "Зеленчуци"),
(15, "Чушки", "Зеленчуци"),
(16, "Моркови", "Зеленчуци"),
(17, "Банани", "Плодове"),
(18, "Ябълки", "Плодове"),
(19, "Портокали", "Плодове"),
(20, "Лимони", "Плодове"),
(21, "Грозде", "Плодове"),
(22, "Боб", "Основни хранителни продукти"),
(23, "Леща", "Основни хранителни продукти"),
(24, "Ориз", "Основни хранителни продукти"),
(25, "Макарони", "Основни хранителни продукти"),
(26, "Бисквити", "Сладки изделия"),
(27, "Шоколад", "Сладки изделия"),
(28, "Бадеми", "Ядки"),
(29, "Фъстъци", "Ядки"),
(30, "Лешници", "Ядки"),
(31, "Кашу", "Ядки"),
(32, "Мед", "Основни хранителни продукти"),
(33, "Кафе", "Напитки"),
(34, "Чай", "Напитки"),
(35, "Минерална вода", "Напитки"),
(36, "Студен чай", "Напитки"),
(37, "Тоалетна хартия", "Нехранителни продукти"),
(38, "Бял Monster", "Напитки")
;

INSERT INTO Inventory (inventory_id, location, total_quantity, product_id) VALUES
(1, 'София', 15000, 1),
(2, 'Пловдив', 20000, 2),
(3, 'Варна', 12000, 3),
(4, 'Бургас', 18000, 4),
(5, 'Русе', 9000, 5),
(6, 'Стара Загора', 13000, 6),
(7, 'Плевен', 11000, 7),
(8, 'Сливен', 14000, 8),
(9, 'Добрич', 10000, 9),
(10, 'Шумен', 16000, 10); 

INSERT INTO Shipments (shipment_id, product_id, from_inventory_id, to_store_id, shipping_date, quantity) VALUES
(1, 1, 1, 1, '2024-01-02 08:15:00', 50),   -- София -> София
(2, 2, 1, 11, '2024-01-03 10:30:00', 40),  -- София -> Перник
(3, 3, 2, 2, '2024-01-04 12:45:00', 60),   -- Пловдив -> Пловдив
(4, 4, 2, 12, '2024-01-05 14:20:00', 45),  -- Пловдив -> Хасково
(5, 5, 3, 3, '2024-01-06 09:10:00', 55),   -- Варна -> Варна
(6, 6, 3, 9, '2024-01-07 15:50:00', 50),   -- Варна -> Добрич
(7, 7, 4, 4, '2024-01-08 11:30:00', 70),   -- Бургас -> Бургас
(8, 8, 4, 8, '2024-01-09 16:40:00', 65),   -- Бургас -> Сливен
(9, 9, 5, 5, '2024-01-10 07:20:00', 40),   -- Русе -> Русе
(10, 10, 5, 19, '2024-01-11 13:10:00', 35), -- Русе -> Разград
(11, 6, 6, 6, '2024-01-12 17:30:00', 48),  -- Стара Загора -> Стара Загора
(12, 7, 6, 15, '2024-01-13 08:05:00', 38), -- Стара Загора -> Габрово
(13, 8, 7, 7, '2024-01-14 18:20:00', 52),  -- Плевен -> Плевен
(14, 9, 7, 14, '2024-01-15 12:35:00', 47), -- Плевен -> Велико Търново
(15, 10, 10, 20, '2024-01-16 09:40:00', 50), -- Шумен -> Търговище
(16, 3, 1, 3, '2024-01-17 14:25:00', 60),   -- София -> Варна
(17, 4, 2, 4, '2024-01-18 16:10:00', 55),   -- Пловдив -> Бургас
(18, 5, 3, 5, '2024-01-19 07:50:00', 45),   -- Варна -> Русе
(19, 6, 4, 6, '2024-01-20 11:15:00', 50),   -- Бургас -> Стара Загора
(20, 7, 5, 7, '2024-01-21 18:05:00', 42),   -- Русе -> Плевен
(21, 8, 6, 8, '2024-01-22 13:55:00', 39),   -- Стара Загора -> Сливен
(22, 9, 7, 9, '2024-01-23 10:20:00', 44),   -- Плевен -> Добрич
(23, 10, 8, 10, '2024-01-24 15:30:00', 49),  -- Сливен -> Шумен
(24, 1, 9, 11, '2024-01-25 12:10:00', 41),  -- Добрич -> Перник
(25, 2, 10, 12, '2024-01-26 09:25:00', 37), -- Шумен -> Хасково
(26, 3, 1, 13, '2024-01-27 17:50:00', 53),  -- София -> Благоевград
(27, 4, 2, 14, '2024-01-28 14:40:00', 57),  -- Пловдив -> Велико Търново
(28, 5, 3, 15, '2024-01-29 08:30:00', 48),  -- Варна -> Габрово
(29, 6, 4, 16, '2024-01-30 16:05:00', 50),  -- Бургас -> Видин
(30, 7, 5, 17, '2024-01-31 10:45:00', 60),  -- Русе -> Кърджали
(31, 8, 6, 18, '2024-01-02 13:20:00', 42),  -- Стара Загора -> Монтана
(32, 9, 7, 19, '2024-01-03 18:30:00', 38),  -- Плевен -> Разград
(33, 10, 8, 20, '2024-01-04 07:55:00', 55),  -- Сливен -> Търговище
(34, 1, 9, 1, '2024-01-05 14:50:00', 40),   -- Добрич -> София
(35, 2, 10, 2, '2024-01-06 09:10:00', 35),  -- Шумен -> Пловдив
(36, 3, 1, 3, '2024-01-07 17:35:00', 51),   -- София -> Варна
(37, 4, 2, 4, '2024-01-08 12:20:00', 43),   -- Пловдив -> Бургас
(38, 5, 3, 5, '2024-01-09 08:45:00', 49),   -- Варна -> Русе
(39, 6, 4, 6, '2024-01-10 18:05:00', 55),   -- Бургас -> Стара Загора
(40, 7, 5, 7, '2024-01-11 14:15:00', 50);   -- Русе -> Плевен

INSERT INTO Customers (First_Name, Last_Name, Last_Visit, Last_Purchased_Item) VALUES
("Борислав", "Войнов", "2025-02-07 9:00:00", 38),
("Валентин", "Берберов", "2025-02-07 9:00:00", 33),
("Венко", "Андреев", "2025-01-31 7:25:00", 33),
("Георги", "Илиев", "2025-02-07 10:45:00", 35),
("Мирослав", "Кавръков", "2025-02-06 13:20:00", 29),
("Мирослав", "Карапенчев", "2025-02-05 11:15:00", 17),
("Михаил", "Стаматов", "2025-02-03 15:55:00", 10)

;
-- SELECT * FROM ProductTypes;
